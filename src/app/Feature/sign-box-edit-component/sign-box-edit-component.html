<div class="edit-container" *ngIf="!loading; else loadingTpl">
  <h2 class="edit-title text-muted">
    Edit SignBox
    <span class="sb-name" *ngIf="form.get('name')?.value; else noName">
      — {{ form.get('name')?.value }}
    </span>
    <ng-template #noName>— (unnamed)</ng-template>
  </h2>

  <form [formGroup]="form" (ngSubmit)="apply()">
    <div class="form-group">
      <label for="name">Name</label>
      <input id="name" formControlName="name" class="form-control border" />
      <div *ngIf="form.controls['name'].invalid && form.controls['name'].touched" class="error">
        Name is required
      </div>
    </div>

    <div class="form-group">
      <label for="ip">IP Address</label>
      <input id="ip" formControlName="ipAddress" class="form-control border" />
      <div
        *ngIf="form.controls['ipAddress'].invalid && form.controls['ipAddress'].touched"
        class="error"
      >
        IP Address is required
      </div>
    </div>

    <div class="directions">
      <label>Directions</label>
      <div formArrayName="directions">
        <div
          *ngFor="let dir of directions.controls; let i = index"
          [formGroupName]="i"
          class="dir-row"
        >
          <input formControlName="name" placeholder="Direction name" class="form-control" />
          <button
            type="button"
            class="btn btn-danger text-white"
            (click)="removeDirection(i)"
            [disabled]="directions.length <= 1"
          >
            Remove
          </button>
        </div>
      </div>
      <button type="button" (click)="addDirection()">Add Direction</button>
    </div>

    <div class="actions">
      <button type="submit" class="apply-button">Apply</button>
      <button type="button" (click)="cancel()" class="cancel-button">Cancel</button>
    </div>
  </form>
</div>

<ng-template #loadingTpl>
  <div>Loading...</div>
</ng-template>
